var O=Object.defineProperty;var P=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var U=(t,e,n)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D=(t,e)=>{for(var n in e||(e={}))j.call(e,n)&&U(t,n,e[n]);if(P)for(var n of P(e))H.call(e,n)&&U(t,n,e[n]);return t};import{r as d,o as i,c as l,a as u,w as g,b as s,d as x,e as q,t as f,F,f as B,g as E,C as z,L as Y,h as J,i as K,P as W,j as G,k as Q,l as X,m as v,v as y,n as I,p as Z,q as tt,s as et,u as nt}from"./vendor.a0bfafc0.js";const ot=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}};ot();var st="./assets/cryptocurrencies.2b750693.png",h=(t,e)=>{const n=t.__vccOpts||t;for(const[r,a]of e)n[r]=a;return n};const at={computed:{user(){return this.$store.getters.user}}},rt={class:"app-header flex space-between main-layout"},ct=s("h3",null,[s("img",{src:st,alt:""}),x(" BitWallet ")],-1),it=x("Contacts");function lt(t,e,n,r,a,o){const c=d("RouterLink");return i(),l("section",rt,[u(c,{to:"/"},{default:g(()=>[ct]),_:1}),u(c,{to:"/contact"},{default:g(()=>[it]),_:1})])}var ut=h(at,[["render",lt]]);const dt={components:{AppHeader:ut},async created(){await this.$store.dispatch({type:"loadContacts"}),await this.$store.dispatch({type:"loadUser"})}},mt={class:"app"};function pt(t,e,n,r,a,o){const c=d("AppHeader"),m=d("RouterView");return i(),l("div",mt,[u(c),u(m)])}var ht=h(dt,[["render",pt]]);const p={storeToStorage:_t,loadFromStorage:ft,getRandomInt:k,getRandomId:gt,getDate:vt,getAvgValues:yt};function _t(t,e){localStorage.setItem(t,JSON.stringify(e)||null)}function ft(t){let e=localStorage.getItem(t);return e?JSON.parse(e):void 0}function gt(){var t=Date.now().toString(16),e=k(1e3,9999).toString(16),n=k(1e3,9999).toString(16);return`${n}-${t}-${e}`.toUpperCase()}function k(t,e){var n=t>=e?t+1:e+1,r=t<=e?t:e;return Math.floor(Math.random()*(n-r))+r}function vt(t){const e=new Date(t);return`${e.getDate()}/${e.getMonth()}/${e.getFullYear()}`}function yt(t){t.splice(150,1);let e=t.length/5,n=[],r=0;for(let a=0;a<5;a++){let o=0;for(let c=r;c<e+r;c++)o+=t[c].y;console.log({avg:o}),o=o/e,n.push(o),r+=30}return console.log({newArr:n}),n}const $={query:b,get:$t,remove:Ct,post:wt,put:xt,insert:bt},C="_id";function b(t){let e=p.loadFromStorage(t);return e||(e=[]),Promise.resolve(e)}async function $t(t,e){return(await b(t)).find(r=>r[C]===e)}async function Ct(t,e){const n=await b(t),r=n.findIndex(a=>a[C]===e);if(e===-1)throw new Error("Could not find item");return n.splice(r,1),p.storeToStorage(t,n),Promise.resolve()}async function wt(t,e){const n=await b(t);return e[C]=p.getRandomId(),n.push(e),p.storeToStorage(t,n),Promise.resolve(e)}async function xt(t,e){const n=await b(t),r=n.findIndex(a=>a[C]===e._id);if(r===-1)throw new Error("Could not find item");return n[r]=e,p.storeToStorage(t,n),Promise.resolve(e)}async function bt(t,e){const n=await b(t);return e.forEach(r=>{r[C]||(r[C]=p.getRandomId())}),n.push(...e),p.storeToStorage(t,n),Promise.resolve()}var St={getRate:Tt,getMarketPrice:Et};async function Tt(t){try{return(await fetch("https://blockchain.info/tobtc?currency=USD&value="+t)).json()}catch(e){console.log("Encountered error:",e)}}async function Et(){try{const t=await q.get("https://api.blockchain.info/charts/market-price?timespan=5months&format=json&cors=true");let{values:e}=t.data;return e}catch(t){console.log("Encountered error:",t)}}var Lt="./assets/bitcoin.6a7dd371.png";const kt={props:{title:String,moves:Array},methods:{getDate(t){return p.getDate(t)}}},It={key:0,class:"move-list flex column"},Mt={class:"moves-title flex"},Pt=s("img",{src:Lt},null,-1),Ut={class:"clean-list"},Dt={class:"flex space-between"},Ft=s("h6",null,"Status: approved",-1);function Bt(t,e,n,r,a,o){return n.moves?(i(),l("section",It,[s("div",Mt,[Pt,s("h4",null,f(n.title),1)]),s("ul",Ut,[(i(!0),l(F,null,B(n.moves,(c,m)=>(i(),l("li",{key:c.toId+":"+m,class:"flex column space-around"},[s("div",Dt,[s("h5",null,f(c.to),1),s("p",null,f(c.amount),1)]),Ft,s("p",null,f(o.getDate(c.at)),1)]))),128))])])):E("",!0)}var R=h(kt,[["render",Bt]]);z.register(Y,J,K,W,G);const Rt={components:{LineChart:Q},props:{chartdata:Array},data(){return{labels:["5 month","4 month","3 month","2 month","last month"],datasets:[{label:"Bitcoin",data:p.getAvgValues(this.chartdata),backgroundColor:"#fff",borderColor:"rgb(75, 192, 192)",tension:.1}],options:{title:{text:"Bitcoin"}}}},computed:{chartData(){return{labels:this.labels,datasets:this.datasets}}}},At={class:"chart"};function Vt(t,e,n,r,a,o){const c=d("LineChart");return i(),l("div",At,[u(c,{"chart-data":o.chartData,options:a.options},null,8,["chart-data","options"])])}var Nt=h(Rt,[["render",Vt]]);const Ot={components:{MoveList:R,Chart:Nt},data(){return{rate:null,chartdata:null}},async created(){this.chartdata=await St.getMarketPrice()},computed:{user(){return this.$store.getters.user},moves(){const t=[...this.user.moves];return t.sort((e,n)=>n.at-e.at),t.splice(0,5)},title(){return"Last 5 moves"}},methods:{}},jt={class:"home-page main-layout flex width-all"},Ht={class:"bitcoin-user-info flex column"},qt=s("h4",null,"Bitcoin value range for the past 5 months:",-1);function zt(t,e,n,r,a,o){const c=d("Chart"),m=d("MoveList");return i(),l("section",jt,[s("div",Ht,[s("h1",null,"Hello "+f(o.user.name),1),s("h3",null,"You currently have "+f(o.user.coins)+" bitcoins",1),qt,a.chartdata?(i(),X(c,{key:0,coins:o.user.coins,chartdata:a.chartdata},null,8,["coins","chartdata"])):E("",!0)]),u(m,{moves:o.moves,title:o.title},null,8,["moves","title"])])}var Yt=h(Ot,[["render",zt]]),Jt="./assets/google-contacts.6490d0ec.png";const Kt={props:{contact:Object}},Wt={class:"contact-preview"},Gt=s("img",{src:Jt},null,-1);function Qt(t,e,n,r,a,o){const c=d("RouterLink");return i(),l("section",Wt,[u(c,{to:`/contact/${n.contact._id}`,class:"flex"},{default:g(()=>[Gt,s("div",null,[s("h4",null,f(n.contact.name),1),s("p",null,f(n.contact.phone),1)])]),_:1},8,["to"])])}var Xt=h(Kt,[["render",Qt]]);const Zt={props:{contacts:Array},components:{ContactPreview:Xt}},te={class:"contact-list"},ee={class:"clean-list flex column justify-center"},ne=x("+");function oe(t,e,n,r,a,o){const c=d("ContactPreview"),m=d("RouterLink");return i(),l("section",te,[s("ul",ee,[(i(!0),l(F,null,B(n.contacts,_=>(i(),l("li",{key:_._id,contact:"contact-preview-container flex"},[u(c,{contact:_},null,8,["contact"])]))),128))]),u(m,{to:"/contact/edit",class:"add-contact"},{default:g(()=>[ne]),_:1})])}var se=h(Zt,[["render",oe]]);const ae={data(){return{filterBy:{name:""}}},methods:{setFilter(){this.$emit("set-filter",this.filterBy)}}},re={class:"contact-filter"};function ce(t,e,n,r,a,o){return i(),l("section",re,[v(s("input",{type:"text",placeholder:"Search contacts","onUpdate:modelValue":e[0]||(e[0]=c=>a.filterBy.name=c),onInput:e[1]||(e[1]=(...c)=>o.setFilter&&o.setFilter(...c))},null,544),[[y,a.filterBy.name]])])}var ie=h(ae,[["render",ce]]);const le={components:{ContactList:se,ContactFilter:ie},data(){return{filterBy:null}},methods:{setFilter(t){this.filterBy=t}},computed:{contacts(){return this.$store.getters.contacts},contactsToShow(){if(!this.filterBy)return this.contacts;const t=new RegExp(this.filterBy.name,"i");return this.contacts.filter(e=>t.test(e.name||e.email))}}},ue={class:"contact-app main-layout flex column align-center"};function de(t,e,n,r,a,o){const c=d("ContactFilter"),m=d("ContactList");return i(),l("section",ue,[u(c,{onSetFilter:o.setFilter},null,8,["onSetFilter"]),u(m,{contacts:o.contactsToShow},null,8,["contacts"])])}var me=h(le,[["render",de]]);const pe={data(){return{amountToTransfer:null}},props:{maxCoins:Number,contact:Object},methods:{transferCoins(){this.amountToTransfer>this.maxCoins||this.$emit("transferCoins",this.amountToTransfer)}}},he={class:"transfer-fund"},_e=s("button",null,"send",-1);function fe(t,e,n,r,a,o){return i(),l("section",he,[s("form",{onSubmit:e[1]||(e[1]=I((...c)=>o.transferCoins&&o.transferCoins(...c),["prevent"]))},[v(s("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=c=>a.amountToTransfer=c),placeholder:"Amount to transfer"},null,512),[[y,a.amountToTransfer]]),_e],32)])}var ge=h(pe,[["render",fe]]);const ve={async created(){const{id:t}=this.$route.params;await this.$store.dispatch({type:"getContact",id:t})},components:{MoveList:R,TransferFund:ge},methods:{async transferCoins(t){await this.$store.dispatch({type:"addMove",contact:this.contact,amount:t}),this.$router.push("/")}},computed:{contact(){return this.$store.getters.contact},moves(){const t=this.user.moves.filter(e=>e.toId===this.contact._id);return t.sort((e,n)=>n.at-e.at),t},user(){return this.$store.getters.user},title(){return`Last 5 moves to ${this.contact.name}`}}},ye={key:0,class:"contact-details main-layout flex column align-center"},$e={class:"flex space-between"},Ce=x("Back"),we=x("Edit"),xe={key:1,class:"loading"};function be(t,e,n,r,a,o){const c=d("RouterLink"),m=d("TransferFund"),_=d("MoveList");return o.contact?(i(),l("section",ye,[s("div",$e,[u(c,{to:"/contact"},{default:g(()=>[Ce]),_:1}),u(c,{to:`/contact/edit/${o.contact._id}`},{default:g(()=>[we]),_:1},8,["to"])]),s("h3",null,f(o.contact.name),1),s("p",null,"Phone: "+f(o.contact.phone),1),s("p",null,"E-Mail: "+f(o.contact.email),1),u(m,{contact:o.contact,maxCoins:o.user.coins,onTransferCoins:o.transferCoins},null,8,["contact","maxCoins","onTransferCoins"]),u(_,{moves:o.moves,title:`All moves to ${o.contact.name}`},null,8,["moves","title"])])):(i(),l("div",xe))}var Se=h(ve,[["render",be]]),Te="./assets/trash.00746895.png";const Ee={async created(){const{id:t}=this.$route.params;t?await this.$store.dispatch({type:"getContact",id:t}):await this.$store.dispatch({type:"getEmptyContact",id:t})},methods:{async save(t){try{await this.$store.dispatch({type:"saveContact",contactToSave:t}),this.$router.push("/contact")}catch(e){console.log("Could not save successfully",e)}},async remove(t){try{await this.$store.dispatch({type:"removeContact",id:t}),this.$router.push("/contact")}catch(e){console.log("Could not delete successfully",e)}}},computed:{contactToEdit(){return D({},this.$store.getters.contact)},pageTitle(){const{id:t}=this.$route.params;return t?"Edit Contact":"Add Contact"}}},Le={class:"contact-edit main-layout flex column align-center"},ke={class:"edit-actions flex space-between align-center"},Ie=x("\u2190 Back"),Me=s("img",{src:Te},null,-1),Pe=[Me],Ue={class:"flex space-between"},De=s("h4",null,"Name:",-1),Fe={class:"flex space-between"},Be=s("h4",null,"Phone:",-1),Re={class:"flex space-between"},Ae=s("h4",null,"eMail:",-1),Ve=s("button",null,"Save",-1);function Ne(t,e,n,r,a,o){var m;const c=d("RouterLink");return i(),l("section",Le,[s("h2",null,f(o.pageTitle),1),s("div",ke,[u(c,{to:"/contact"},{default:g(()=>[Ie]),_:1}),(m=o.contactToEdit)!=null&&m._id?(i(),l("button",{key:0,onClick:e[0]||(e[0]=_=>o.remove(o.contactToEdit._id))},Pe)):E("",!0)]),o.contactToEdit?(i(),l("form",{key:0,onSubmit:e[4]||(e[4]=I(_=>o.save(o.contactToEdit),["prevent"])),class:"flex column"},[s("label",Ue,[De,v(s("input",{"onUpdate:modelValue":e[1]||(e[1]=_=>o.contactToEdit.name=_),type:"text",placeholder:"Name"},null,512),[[y,o.contactToEdit.name]])]),s("label",Fe,[Be,v(s("input",{"onUpdate:modelValue":e[2]||(e[2]=_=>o.contactToEdit.phone=_),type:"text",placeholder:"Phone"},null,512),[[y,o.contactToEdit.phone]])]),s("label",Re,[Ae,v(s("input",{"onUpdate:modelValue":e[3]||(e[3]=_=>o.contactToEdit.email=_),type:"text",placeholder:"E-Mail"},null,512),[[y,o.contactToEdit.email]])]),Ve],32)):E("",!0)])}var Oe=h(Ee,[["render",Ne]]);const je={data(){return{name:""}},methods:{async signup(t){if(t!=="")try{await this.$store.dispatch({type:"signup",name:t}),this.$router.push("/")}catch(e){console.log("Could not sign up successfully",e)}}}},He={class:"signup-page main-layout"},qe=s("h3",null,"Signup and start exploring our demo!",-1),ze=s("p",null,"Just enter your name to recieve complementary coins that allow you to use our services",-1);function Ye(t,e,n,r,a,o){return i(),l("section",He,[qe,ze,s("form",{onSubmit:e[1]||(e[1]=I(c=>o.signup(this.name),["prevent"]))},[v(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>this.name=c),placeholder:"Enter your name"},null,512),[[y,this.name]])],32)])}var Je=h(je,[["render",Ye]]);const w="contacts";var S={query:Ke,get:We,remove:Ge,save:Qe,getEmptyContact:Xe};async function Ke(){let t=await $.query(w);return(!t||!t.length)&&(t=Ze(),await $.insert(w,t)),t}async function We(t){const e=await $.get(w,t);if(!e)throw new Error("Unknown contact");return e}function Ge(t){return $.remove(w,t)}function Qe(t){return t._id?$.put(w,t):$.post(w,t)}function Xe(){return{name:"",email:"",phone:""}}function Ze(){return[{_id:"d99e3u2ih329",name:"Nora Channer",email:"nchanner0@myspace.com",phone:"+1 (531) 904-7601"},{_id:"09tegu6i83yd",name:"Tabby Slayny",email:"tslayny1@ucoz.com",phone:"+63 (858) 652-0461"},{_id:"a39x7zzi2121",name:"Margarette Ballefant",email:"mballefant2@imgur.com",phone:"+86 (608) 819-8196"},{_id:"sm9n3v21h225",name:"Ursola Clawsley",email:"uclawsley3@archive.org",phone:"+55 (676) 260-8427"},{_id:"it993625hn2b",name:"Innis Snaden",email:"isnaden4@devhub.com",phone:"+386 (522) 689-2908"}]}var tn={state:{contacts:null,contact:null},getters:{contacts(t){return t.contacts},contact(t){return t.contact}},mutations:{setContacts(t,{contacts:e}){t.contacts=e},setContact(t,{contact:e}){t.contact=e},removeContact(t,{id:e}){const n=t.contacts.findIndex(r=>r._id===e);t.contacts.splice(n,1)},saveContact(t,{contact:e}){const n=t.contacts.findIndex(r=>r._id===e._id);n!==-1?t.contacts.splice(n,1,e):t.contacts.push(e)}},actions:{async loadContacts({commit:t}){const e=await S.query();t({type:"setContacts",contacts:e})},async getContact({commit:t},{id:e}){const n=await S.get(e);t({type:"setContact",contact:n})},async removeContact({commit:t},{id:e}){await S.remove(e),t({type:"removeContact",id:e})},async saveContact({commit:t},{contactToSave:e}){const n=await S.save(e);t({type:"saveContact",contact:n})},async getEmptyContact({commit:t}){const e=await S.getEmptyContact();t({type:"setContact",contact:e})}}},T={getUser:A,signup:en,addMove:nn,logout:on};const L="user";function A(){const t=p.loadFromStorage(L);return Promise.resolve(t)}function en(t){const e={id:p.getRandomId(),name:t,coins:100,moves:sn()};return p.storeToStorage(L,e),Promise.resolve(e)}async function nn(t,e){const n=await A();if(n.coins<e)return Promise.reject("Insufficient funds");n.coins-=e;const r={toId:t._id,to:t.name,at:Date.now(),amount:e};return n.moves.push(r),p.storeToStorage(L,n),Promise.resolve(n)}function on(){p.storeToStorage(L,null)}function sn(){return[{toId:"d99e3u2ih329",to:"Nora Channer",at:1648408113426,amount:.17},{toId:"09tegu6i83yd",to:"Tabby Slayny",at:1648409224426,amount:1},{toId:"a39x7zzi2121",to:"Margarette Ballefant",at:1648411335426,amount:2.06},{toId:"d99e3u2ih329",to:"Nora Channer",at:1648412446426,amount:.89},{toId:"d99e3u2ih329",to:"Nora Channer",at:1648413557426,amount:.03}]}var an={state:{user:null},getters:{user(t){return t.user}},mutations:{setUser(t,{user:e}){t.user=e}},actions:{async loadUser({commit:t}){const e=await T.getUser();t({type:"setUser",user:e})},async signup({commit:t},{name:e}){const n=await T.signup(e);t({type:"setUser",user:n})},logout({commit:t}){T.logout(),t({type:"setUser",user:null})},async addMove({commit:t},{contact:e,amount:n}){const r=await T.addMove(e,n);t({type:"setUser",user:r})}}};const V=Z({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{contactModule:tn,userModule:an}}),N=tt({history:et(),routes:[{path:"/",name:"Home",component:Yt},{path:"/signup",name:"SignUp",component:Je},{path:"/contact",name:"ContactApp",component:me},{path:"/contact/:id",name:"ContactDetails",component:Se},{path:"/contact/edit/:id?",name:"ContactEditPage",component:Oe}]});N.beforeEach((t,e,n)=>{!V.getters.user&&t.name!=="SignUp"?n({name:"SignUp"}):n()});const M=nt(ht);M.use(N);M.use(V);M.mount("#app");
